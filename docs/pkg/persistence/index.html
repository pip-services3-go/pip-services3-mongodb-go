<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>persistence - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.13.15";</script>
<script src="../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="../index.html">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="../index.html">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package persistence
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "persistence"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
			
				
				<dd><a href="index.html#IdentifiableMongoDbPersistence">type IdentifiableMongoDbPersistence</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewIdentifiableMongoDbPersistence">func NewIdentifiableMongoDbPersistence(proto reflect.Type, collection string) *IdentifiableMongoDbPersistence</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.Configure">func (c *IdentifiableMongoDbPersistence) Configure(config *cconf.ConfigParams)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.Create">func (c *IdentifiableMongoDbPersistence) Create(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.DeleteById">func (c *IdentifiableMongoDbPersistence) DeleteById(correlationId string, id interface{}) (item interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.DeleteByIds">func (c *IdentifiableMongoDbPersistence) DeleteByIds(correlationId string, ids []interface{}) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.GetListByIds">func (c *IdentifiableMongoDbPersistence) GetListByIds(correlationId string, ids []interface{}) (items []interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.GetOneById">func (c *IdentifiableMongoDbPersistence) GetOneById(correlationId string, id interface{}) (item interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.Set">func (c *IdentifiableMongoDbPersistence) Set(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.Update">func (c *IdentifiableMongoDbPersistence) Update(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#IdentifiableMongoDbPersistence.UpdatePartially">func (c *IdentifiableMongoDbPersistence) UpdatePartially(correlationId string, id interface{}, data *cdata.AnyValueMap) (item interface{}, err error)</a></dd>
				
			
				
				<dd><a href="index.html#MongoDbConnection">type MongoDbConnection</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewMongoDbConnection">func NewMongoDbConnection() (c *MongoDbConnection)</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.Close">func (c *MongoDbConnection) Close(correlationId string) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.Configure">func (c *MongoDbConnection) Configure(config *cconf.ConfigParams)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.GetConnection">func (c *MongoDbConnection) GetConnection() *mongodrv.Client</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.GetDatabase">func (c *MongoDbConnection) GetDatabase() *mongodrv.Database</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.GetDatabaseName">func (c *MongoDbConnection) GetDatabaseName() string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.IsOpen">func (c *MongoDbConnection) IsOpen() bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.Open">func (c *MongoDbConnection) Open(correlationId string) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbConnection.SetReferences">func (c *MongoDbConnection) SetReferences(references crefer.IReferences)</a></dd>
				
			
				
				<dd><a href="index.html#MongoDbPersistence">type MongoDbPersistence</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewMongoDbPersistence">func NewMongoDbPersistence(proto reflect.Type, collection string) *MongoDbPersistence</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.Clear">func (c *MongoDbPersistence) Clear(correlationId string) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.Close">func (c *MongoDbPersistence) Close(correlationId string) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.Configure">func (c *MongoDbPersistence) Configure(config *cconf.ConfigParams)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.Create">func (c *MongoDbPersistence) Create(correlationId string, item interface{}) (result interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.DeleteByFilter">func (c *MongoDbPersistence) DeleteByFilter(correlationId string, filter interface{}) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.EnsureIndex">func (c *MongoDbPersistence) EnsureIndex(keys interface{}, options *mongoopt.IndexOptions)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.GetCountByFilter">func (c *MongoDbPersistence) GetCountByFilter(correlationId string, filter interface{}) (count int64, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.GetListByFilter">func (c *MongoDbPersistence) GetListByFilter(correlationId string, filter interface{}, sort interface{}, sel interface{}) (items []interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.GetOneRandom">func (c *MongoDbPersistence) GetOneRandom(correlationId string, filter interface{}) (item interface{}, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.GetPageByFilter">func (c *MongoDbPersistence) GetPageByFilter(correlationId string, filter interface{}, paging *cdata.PagingParams, sort interface{}, sel interface{}) (page *cdata.DataPage, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.IsOpen">func (c *MongoDbPersistence) IsOpen() bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.NewObjectByPrototype">func (c *MongoDbPersistence) NewObjectByPrototype() reflect.Value</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.Open">func (c *MongoDbPersistence) Open(correlationId string) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.PerformConvertFromPublic">func (c *MongoDbPersistence) PerformConvertFromPublic(item interface{}) interface{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.PerformConvertToPublic">func (c *MongoDbPersistence) PerformConvertToPublic(value interface{}) interface{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.SetReferences">func (c *MongoDbPersistence) SetReferences(references crefer.IReferences)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MongoDbPersistence.UnsetReferences">func (c *MongoDbPersistence) UnsetReferences()</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go">IdentifiableMongoDbPersistence.go</a>
			
				<a href="http://localhost:6060/src/persistence/MongoDbConnection.go">MongoDbConnection.go</a>
			
				<a href="http://localhost:6060/src/persistence/MongoDbPersistence.go">MongoDbPersistence.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
		
			
			
			<h2 id="IdentifiableMongoDbPersistence">type <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=4748:4814#L113">IdentifiableMongoDbPersistence</a>
				<a class="permalink" href="index.html#IdentifiableMongoDbPersistence">&#xb6;</a>
				
				
			</h2>
			<p>
IdentifiableMongoDbPersistence is abstract persistence component that stores data in MongoDB
and implements a number of CRUD operations over data items with unique ids.
The data items must implement IIdentifiable interface.
</p>
<p>
In basic scenarios child classes shall only override GetPageByFilter,
GetListByFilter or DeleteByFilter operations with specific filter function.
All other operations can be used out of the box.
</p>
<p>
In complex scenarios child classes can implement additional operations by
accessing c.Collection properties.
</p>
<p>
Configuration parameters:
</p>
<pre>- collection:                  (optional) MongoDB collection name
- connection(s):
  - discovery_key:             (optional) a key to retrieve the connection from IDiscovery
  - host:                      host name or IP address
  - port:                      port number (default: 27017)
  - uri:                       resource URI or connection string with all parameters in it
- credential(s):
  - store_key:                 (optional) a key to retrieve the credentials from ICredentialStore
  - username:                  (optional) user name
  - password:                  (optional) user password
- options:
  - max_pool_size:             (optional) maximum connection pool size (default: 2)
  - keep_alive:                (optional) enable connection keep alive (default: true)
  - connect_timeout:           (optional) connection timeout in milliseconds (default: 5000)
  - socket_timeout:            (optional) socket timeout in milliseconds (default: 360000)
  - auto_reconnect:            (optional) enable auto reconnection (default: true) (not used)
  - reconnect_interval:        (optional) reconnection interval in milliseconds (default: 1000) (not used)
  - max_page_size:             (optional) maximum page size (default: 100)
  - replica_set:               (optional) name of replica set
  - ssl:                       (optional) enable SSL connection (default: false) (not implements in this release)
  - auth_source:               (optional) authentication source
  - auth_user:                 (optional) authentication user name
  - auth_password:             (optional) authentication user password
  - debug:                     (optional) enable debug output (default: false). (not used)
</pre>
<p>
References:
</p>
<p>
- *:logger:*:*:1.0           (optional) ILogger components to pass log messages components to pass log messages
- *:discovery:*:*:1.0        (optional) IDiscovery services
- *:credential-store:*:*:1.0 (optional) Credential stores to resolve credentials
</p>
<p>
Example:
</p>
<pre>  type MyMongoDbPersistence  struct {
    IdentifiableMongoDbPersistence
  }

  func NewMyMongoDbPersistence() {
    proto := reflect.TypeOf(MyData{})
    return &amp;DummyMongoDbPersistence{*mngpersist.NewIdentifiableMongoDbPersistence(proto, &#34;mydata&#34;)}
  }

  composeFilter(filter cdata.FilterParams) interface{} {
    if &amp;filter == nil {
      filter = *cdata.NewEmptyFilterParams()
	}

    name := filter.GetAsNullableString(&#34;name&#34;)
    var filterObj bson.M
	if *name != &#34;&#34; {
	    filterObj = bson.M{&#34;name&#34;: *name}
	  else {
	    filterObj = bson.M{}
	}
	return filterObj
  }

  func (c *MyMongoDbPersistence) GetPageByFilter(correlationId string, filter cdata.FilterParams, paging cdata.PagingParams) (page MyDataPage, err error){
      tempPage, err := c.IdentifiableMongoDbPersistence.GetPageByFilter(correlationId,
  	  composeFilter(filter), paging, nil, nil)
  	  // Convert to MyDataPage
  	  dataLen := int64(len(tempPage.Data)) // For full release tempPage and delete this by GC
  	  data := make([]MyData, dataLen)
  	  for i, v := range tempPage.Data {
  	    data[i] = v.(MyData)
  	  }
  	  page = *NewMyDataPage(&amp;dataLen, data)
  	  return page, err
  }

  persistence = NewMyMongoDbPersistence()
  persistence.Configure(NewConfigParamsFromTuples(
    &#34;host&#34;, &#34;localhost&#34;,
  	&#34;port&#34;, &#34;27017&#34;
  	&#34;database&#34;, &#34;test&#34;,
  ))

  opnErr := persitence.Open(&#34;123&#34;)
  if opnErr != nil {
  	...
  }

  crtRes, crtErr := persistence.Create(&#34;123&#34;, MyData{ id: &#34;1&#34;, name: &#34;ABC&#34; })
  if crtErr != nil {
	...
  }
  getRes, getErr := persistence.GetPageByFilter(&#34;123&#34;, NewFilterParamsFromTuples(&#34;name&#34;, &#34;ABC&#34;), nil)
  if getErr != nil {
	...
  }
  fmt.Println(getRes.Data);          // Result: { id: &#34;1&#34;, name: &#34;ABC&#34; }

  persistence.deleteById(&#34;123&#34;, &#34;1&#34;)
	...
</pre>

			<pre>type IdentifiableMongoDbPersistence struct {
    <a href="index.html#MongoDbPersistence">MongoDbPersistence</a>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewIdentifiableMongoDbPersistence">func <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=5161:5270#L125">NewIdentifiableMongoDbPersistence</a>
					<a class="permalink" href="index.html#NewIdentifiableMongoDbPersistence">&#xb6;</a>
					
					
				</h3>
				<pre>func NewIdentifiableMongoDbPersistence(proto <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Type">Type</a>, collection <a href="http://localhost:6060/pkg/builtin/#string">string</a>) *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a></pre>
				<p>
NewIdentifiableMongoDbPersistence is creates a new instance of the persistence component.
Parameters:
</p>
<pre>- proto reflect.Type
type of saved data, need for correct decode from DB
- collection string
(optional) a collection name.
</pre>
<p>
Return *IdentifiableMongoDbPersistence
new created IdentifiableMongoDbPersistence component
</p>

				
				
			

			
				
				<h3 id="IdentifiableMongoDbPersistence.Configure">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=5675:5753#L140">Configure</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.Configure">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) Configure(config *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>)</pre>
				<p>
Configure is configures component by passing configuration parameters.
Parameters:
</p>
<pre>- config  *cconf.ConfigParams
configuration parameters to be set.
</pre>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.Create">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=7635:7754#L191">Create</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.Create">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) Create(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Create was creates a data item.
Parameters:
</p>
<pre>- correlation_id string
(optional) transaction id to Trace execution through call chain.
- item interface{}
</pre>
<p>
an item to be created.
Returns result interface{}, err error
created item and error, if they are occured
</p>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.DeleteById">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=12449:12568#L341">DeleteById</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.DeleteById">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) DeleteById(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, id interface{}) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
DeleteById is deleted a data item by it&#34;s unique id.
Parameters:
</p>
<pre>- correlation_id string
(optional) transaction id to Trace execution through call chain.
- id  interface{}
an id of the item to be deleted
</pre>
<p>
Returns item interface{}, err error
deleted item and error, if they are occured
</p>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.DeleteByIds">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=13319:13418#L368">DeleteByIds</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.DeleteByIds">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) DeleteByIds(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, ids []interface{}) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
DeleteByIds is deletes multiple data items by their unique ids.
</p>
<pre>- correlationId string
(optional) transaction id to Trace execution through call chain.
- ids  []interface{}
ids of data items to be deleted.
</pre>
<p>
Retrun error
error or nil for success.
</p>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.GetListByIds">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=6247:6374#L153">GetListByIds</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.GetListByIds">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) GetListByIds(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, ids []interface{}) (items []interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetListByIds is gets a list of data items retrieved by given unique ids.
Parameters:
</p>
<pre>- correlationId  string
(optional) transaction id to Trace execution through call chain.
- ids  []interface{}
ids of data items to be retrieved
</pre>
<p>
Returns items []interface{}, err error
a data list and error, if theq are occured.
</p>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.GetOneById">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=6810:6929#L166">GetOneById</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.GetOneById">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) GetOneById(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, id interface{}) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetOneById is gets a data item by its unique id.
Parameters:
</p>
<pre>- correlationId     (optional) transaction id to Trace execution through call chain.
- id                an id of data item to be retrieved.
- callback          callback function that receives data item or error.
</pre>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.Set">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=8595:8711#L220">Set</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.Set">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) Set(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Set is sets a data item. If the data item exists it updates it,
otherwise it create a new data item.
Parameters:
</p>
<pre>- correlation_id string
(optional) transaction id to Trace execution through call chain.
- item interface{}
a item to be set.
</pre>
<p>
Returns result interface{}, err error
updated item and error, if they occured
</p>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.Update">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=9888:10007#L262">Update</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.Update">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) Update(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Update is updates a data item.
Parameters:
</p>
<pre>- correlation_id string
(optional) transaction id to Trace execution through call chain.
- item  interface{}
an item to be updated.
</pre>
<p>
Returns result interface{}, err error
updated item and error, if theq are occured
</p>

				
				
				
			
				
				<h3 id="IdentifiableMongoDbPersistence.UpdatePartially">func (*IdentifiableMongoDbPersistence) <a href="http://localhost:6060/src/persistence/IdentifiableMongoDbPersistence.go?s=11209:11358#L302">UpdatePartially</a>
					<a class="permalink" href="index.html#IdentifiableMongoDbPersistence.UpdatePartially">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#IdentifiableMongoDbPersistence">IdentifiableMongoDbPersistence</a>) UpdatePartially(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, id interface{}, data *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/">cdata</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/#AnyValueMap">AnyValueMap</a>) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
UpdatePartially is updates only few selected fields in a data item.
Parameters:
</p>
<pre>- correlation_id string
(optional) transaction id to Trace execution through call chain.
- id interface{}
an id of data item to be updated.
- data  cdata.AnyValueMap
a map with fields to be updated.
</pre>
<p>
Returns item interface{}, err error
updated item and error, if they are occured
</p>

				
				
				
			
		
			
			
			<h2 id="MongoDbConnection">type <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=2659:3127#L44">MongoDbConnection</a>
				<a class="permalink" href="index.html#MongoDbConnection">&#xb6;</a>
				
				
			</h2>
			<p>
MongoDbConnection struct help creates new connections to MongoDB
MongoDB connection using plain driver.
</p>
<p>
By defining a connection and sharing it through multiple persistence components
you can reduce number of used database connections.
</p>
<p>
Configuration parameters:
</p>
<pre>- connection(s):
  - discovery_key:             (optional) a key to retrieve the connection from IDiscovery
  - host:                      host name or IP address
  - port:                      port number (default: 27017)
  - uri:                       resource URI or connection string with all parameters in it
- credential(s):
  - store_key:                 (optional) a key to retrieve the credentials from ICredentialStore
  - username:                  (optional) user name
  - password:                  (optional) user password
- options:
  - max_pool_size:             (optional) maximum connection pool size (default: 2)
  - keep_alive:                (optional) enable connection keep alive in ms, if zero connection are keeped indefinitely (default: 0)
  - connect_timeout:           (optional) connection timeout in milliseconds (default: 5000)
  - socket_timeout:            (optional) socket timeout in milliseconds (default: 360000)
  - auto_reconnect:            (optional) enable auto reconnection (default: true) (Not used)
  - reconnect_interval:        (optional) reconnection interval in milliseconds (default: 1000) (Not used)
  - max_page_size:             (optional) maximum page size (default: 100)
  - replica_set:               (optional) name of replica set
  - ssl:                       (optional) enable SSL connection (default: false) (Not release in this version)
  - auth_source:               (optional) authentication source
  - debug:                     (optional) enable debug output (default: false). (Not used)
</pre>
<p>
References:
</p>
<p>
- *:logger:*:*:1.0           (optional) ILogger components to pass log messages
- *:discovery:*:*:1.0        (optional) IDiscovery services
- *:credential-store:*:*:1.0 (optional) Credential stores to resolve credentials
</p>

			<pre>type MongoDbConnection struct {
<span id="MongoDbConnection.Ctx"></span>    Ctx <a href="http://localhost:6060/pkg/context/">context</a>.<a href="http://localhost:6060/pkg/context/#Context">Context</a>
    <span class="comment">// The logger.</span>
<span id="MongoDbConnection.Logger"></span>    Logger *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/">clog</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/#CompositeLogger">CompositeLogger</a>
    <span class="comment">//   The connection resolver.</span>
<span id="MongoDbConnection.ConnectionResolver"></span>    ConnectionResolver *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-mongodb-go/connect/">mcon</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-mongodb-go/connect/#MongoDbConnectionResolver">MongoDbConnectionResolver</a>
    <span class="comment">//   The configuration options.</span>
<span id="MongoDbConnection.Options"></span>    Options *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>
    <span class="comment">//   The MongoDB connection object.</span>
<span id="MongoDbConnection.Connection"></span>    Connection *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/">mongodrv</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/#Client">Client</a>
    <span class="comment">//   The MongoDB database name.</span>
<span id="MongoDbConnection.DatabaseName"></span>    DatabaseName <a href="http://localhost:6060/pkg/builtin/#string">string</a>
    <span class="comment">//   The MongoDb database object.</span>
<span id="MongoDbConnection.Db"></span>    Db *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/">mongodrv</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/#Database">Database</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewMongoDbConnection">func <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=3259:3309#L63">NewMongoDbConnection</a>
					<a class="permalink" href="index.html#NewMongoDbConnection">&#xb6;</a>
					
					
				</h3>
				<pre>func NewMongoDbConnection() (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>)</pre>
				<p>
NewMongoDbConnection are creates a new instance of the connection component.
Returns *MongoDbConnection with default config
</p>

				
				
			

			
				
				<h3 id="MongoDbConnection.Close">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=7724:7785#L197">Close</a>
					<a class="permalink" href="index.html#MongoDbConnection.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) Close(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
Close method is closes component and frees used resources.
Parameters:
</p>
<pre>- correlationId string
(optional) transaction id to trace execution through call chain.
</pre>
<p>
Return error
error or nil when no errors occured.
</p>

				
				
				
			
				
				<h3 id="MongoDbConnection.Configure">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=3924:3989#L85">Configure</a>
					<a class="permalink" href="index.html#MongoDbConnection.Configure">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) Configure(config *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>)</pre>
				<p>
Configure is configures component by passing configuration parameters.
Parameters:
</p>
<pre>- config  *cconf.ConfigParams
configuration parameters to be set.
</pre>

				
				
				
			
				
				<h3 id="MongoDbConnection.GetConnection">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=8260:8320#L217">GetConnection</a>
					<a class="permalink" href="index.html#MongoDbConnection.GetConnection">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) GetConnection() *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/">mongodrv</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/#Client">Client</a></pre>
				<p>
GetConnection method return work connection object
Return *mongodrv.Client
</p>

				
				
				
			
				
				<h3 id="MongoDbConnection.GetDatabase">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=8426:8486#L223">GetDatabase</a>
					<a class="permalink" href="index.html#MongoDbConnection.GetDatabase">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) GetDatabase() *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/">mongodrv</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/#Database">Database</a></pre>
				<p>
GetDatabase method retrun work database object
Return *mongodrv.Database
</p>

				
				
				
			
				
				<h3 id="MongoDbConnection.GetDatabaseName">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=8578:8630#L229">GetDatabaseName</a>
					<a class="permalink" href="index.html#MongoDbConnection.GetDatabaseName">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) GetDatabaseName() <a href="http://localhost:6060/pkg/builtin/#string">string</a></pre>
				<p>
GetDatabaseName method retruns name of work database
Return string
</p>

				
				
				
			
				
				<h3 id="MongoDbConnection.IsOpen">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=4596:4637#L102">IsOpen</a>
					<a class="permalink" href="index.html#MongoDbConnection.IsOpen">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) IsOpen() <a href="http://localhost:6060/pkg/builtin/#bool">bool</a></pre>
				<p>
IsOpen method is checks if the component is opened.
Returns true if the component has been opened and false otherwise.
</p>

				
				
				
			
				
				<h3 id="MongoDbConnection.Open">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=6407:6467#L155">Open</a>
					<a class="permalink" href="index.html#MongoDbConnection.Open">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) Open(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
Open method is opens the component.
Parameters:
</p>
<pre>- correlationId string
(optional) transaction id to trace execution through call chain.
</pre>
<p>
Return error
error or nil when no errors occured.
</p>

				
				
				
			
				
				<h3 id="MongoDbConnection.SetReferences">func (*MongoDbConnection) <a href="http://localhost:6060/src/persistence/MongoDbConnection.go?s=4309:4381#L95">SetReferences</a>
					<a class="permalink" href="index.html#MongoDbConnection.SetReferences">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbConnection">MongoDbConnection</a>) SetReferences(references <a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/">crefer</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/#IReferences">IReferences</a>)</pre>
				<p>
SetReferences are sets references to dependent components.
Parameters:
</p>
<pre>- references crefer.IReferences
references to locate the component dependencies.
</pre>

				
				
				
			
		
			
			
			<h2 id="MongoDbPersistence">type <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=5651:6582#L140">MongoDbPersistence</a>
				<a class="permalink" href="index.html#MongoDbPersistence">&#xb6;</a>
				
				
			</h2>
			<pre>MongoDbPersistence abstract persistence component that stores data in MongoDB using plain driver.

This is the most basic persistence component that is only
able to store data items of any type. Specific CRUD operations
over the data items must be implemented in child classes by
accessing c.Db or c.Collection properties.
</pre>
<p>
Configuration parameters:
</p>
<pre> - collection:                  (optional) MongoDB collection name
 - connection(s):
   - discovery_key:             (optional) a key to retrieve the connection from IDiscovery
   - host:                      host name or IP address
   - port:                      port number (default: 27017)
   - database:                  database name
   - uri:                       resource URI or connection string with all parameters in it
 - credential(s):
   - store_key:                 (optional) a key to retrieve the credentials from ICredentialStore
   - username:                  (optional) user name
   - password:                  (optional) user password
 - options:
   - max_pool_size:             (optional) maximum connection pool size (default: 2)
   - keep_alive:                (optional) enable connection keep alive (default: true)
   - connect_timeout:           (optional) connection timeout in milliseconds (default: 5000)
   - socket_timeout:            (optional) socket timeout in milliseconds (default: 360000)
   - auto_reconnect:            (optional) enable auto reconnection (default: true) (not used)
   - reconnect_interval:        (optional) reconnection interval in milliseconds (default: 1000) (not used)
   - max_page_size:             (optional) maximum page size (default: 100)
   - replica_set:               (optional) name of replica set
   - ssl:                       (optional) enable SSL connection (default: false) (not implements in this release)
   - auth_source:               (optional) authentication source
   - debug:                     (optional) enable debug output (default: false). (not used)

References:

- *:logger:*:*:1.0           (optional) ILogger components to pass log messages
- *:discovery:*:*:1.0        (optional) IDiscovery services
- *:credential-store:*:*:1.0 (optional) Credential stores to resolve credentials
</pre>
<p>
Example:
</p>
<pre>type MyMongoDbPersistence struct {
  MongoDbPersistence
}

func NewMyMongoDbPersistence(proto reflect.Type, collection string) *MyMongoDbPersistence {
  mc:= MyMongoDbPersistence{}
  mc.MongoDbPersistence = NewMongoDbPersistence(proto, collection)
  return &amp;mc
}

func (c * MyMongoDbPersistence) GetByName(correlationId string, name string) (item interface{}, err error) {
  filter := bson.M{&#34;name&#34;: name}
  docPointer := NewObjectByPrototype(c.Prototype)
  foRes := c.Collection.FindOne(context.TODO(), filter)
  ferr := foRes.Decode(docPointer.Interface())
  if ferr != nil {
      if ferr == mongo.ErrNoDocuments {
         return nil, nil
      }
      return nil, ferr
  }
  item = docPointer.Elem().Interface()
  c.ConvertToPublic(&amp;item)
  return item, nil
}

  func (c * MyMongoDbPersistence) Set(correlatonId string, item MyData) (result interface{}, err error) {
      newItem = cmpersist.CloneObject(item, c.Prototype)
      // Assign unique id if not exist
      cmpersist.GenerateObjectId(&amp;newItem)
      id := cmpersist.GetObjectId(newItem)
      c.ConvertFromPublic(&amp;newItem)
      filter := bson.M{&#34;_id&#34;: id}
      var options mngoptions.FindOneAndReplaceOptions
      retDoc := mngoptions.After
      options.ReturnDocument = &amp;retDoc
      upsert := true
      options.Upsert = &amp;upsert
      frRes := c.Collection.FindOneAndReplace(context.TODO(), filter, newItem, &amp;options)
      if frRes.Err() != nil {
          return nil, frRes.Err()
      }
      docPointer := NewObjectByPrototype(c.Prototype)
      err = frRes.Decode(docPointer.Interface())
      if err != nil {
          if err == mongo.ErrNoDocuments {
      	    return nil, nil
          }
          return nil, err
      }
      item = docPointer.Elem().Interface()
      c.ConvertToPublic(&amp;item)
      return item, nil
  }

  persistence := NewMyMongoDbPersistence(reflect.TypeOf(MyData{}), &#34;mycollection&#34;)
  persistence.Configure(NewConfigParamsFromTuples(
      &#34;host&#34;, &#34;localhost&#34;,
      &#34;port&#34;, &#34;27017&#34;,
      &#34;database&#34;, &#34;test&#34;,
  ))

  opnErr := persitence.Open(&#34;123&#34;)
  if opnErr != nil {
      ...
  }

  resItem, setErr := persistence.Set(&#34;123&#34;, MyData{ name: &#34;ABC&#34; })
  if setErr != nil {
      ...
  }

  item, getErr := persistence.GetByName(&#34;123&#34;, &#34;ABC&#34;)
  if getErr != nil {
      ...
  }
  fmt.Println(item)                   // Result: { name: &#34;ABC&#34; }
  (&#34;123&#34;, &#34;ABC&#34;)
  if getErr != nil {
      ...
  }
  fmt.Println(item)                   // Result: { name: &#34;ABC&#34; }

  (&#34;123&#34;, &#34;ABC&#34;)
  if getErr != nil {
      ...
  }
  fmt.Println(item)                   // Result: { name: &#34;ABC&#34; }
</pre>

			<pre>type MongoDbPersistence struct {
<span id="MongoDbPersistence.Prototype"></span>    Prototype <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Type">Type</a>

<span id="MongoDbPersistence.ConvertFromPublic"></span>    ConvertFromPublic        func(interface{}) interface{}
<span id="MongoDbPersistence.ConvertToPublic"></span>    ConvertToPublic          func(interface{}) interface{}
<span id="MongoDbPersistence.ConvertFromPublicPartial"></span>    ConvertFromPublicPartial func(interface{}) interface{}

    <span class="comment">// The dependency resolver.</span>
<span id="MongoDbPersistence.DependencyResolver"></span>    DependencyResolver <a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/">crefer</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/#DependencyResolver">DependencyResolver</a>
    <span class="comment">// The logger.</span>
<span id="MongoDbPersistence.Logger"></span>    Logger <a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/">clog</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-components-go/log/#CompositeLogger">CompositeLogger</a>
    <span class="comment">// The MongoDB connection component.</span>
<span id="MongoDbPersistence.Connection"></span>    Connection *<a href="index.html#MongoDbConnection">MongoDbConnection</a>
    <span class="comment">// The MongoDB connection object.</span>
<span id="MongoDbPersistence.Client"></span>    Client *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/">mongodrv</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/#Client">Client</a>
    <span class="comment">// The MongoDB database name.</span>
<span id="MongoDbPersistence.DatabaseName"></span>    DatabaseName <a href="http://localhost:6060/pkg/builtin/#string">string</a>
    <span class="comment">// The MongoDB colleciton object.</span>
<span id="MongoDbPersistence.CollectionName"></span>    CollectionName <a href="http://localhost:6060/pkg/builtin/#string">string</a>
    <span class="comment">//  The MongoDb database object.</span>
<span id="MongoDbPersistence.Db"></span>    Db *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/">mongodrv</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/#Database">Database</a>
    <span class="comment">// The MongoDb collection object.</span>
<span id="MongoDbPersistence.Collection"></span>    Collection *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/">mongodrv</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/#Collection">Collection</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewMongoDbPersistence">func <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=6888:6973#L181">NewMongoDbPersistence</a>
					<a class="permalink" href="index.html#NewMongoDbPersistence">&#xb6;</a>
					
					
				</h3>
				<pre>func NewMongoDbPersistence(proto <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Type">Type</a>, collection <a href="http://localhost:6060/pkg/builtin/#string">string</a>) *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a></pre>
				<p>
NewMongoDbPersistence are creates a new instance of the persistence component.
Parameters:
</p>
<pre>- proto reflect.Type
type of saved data, need for correct decode from DB
- collection  string
a collection name.
</pre>
<p>
Return *MongoDbPersistence
new created MongoDbPersistence component
</p>

				
				
			

			
				
				<h3 id="MongoDbPersistence.Clear">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=14111:14173#L438">Clear</a>
					<a class="permalink" href="index.html#MongoDbPersistence.Clear">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) Clear(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
Clear method are clears component state.
Parameters:
</p>
<pre>- correlationId string
(optional) transaction id to trace execution through call chain.
</pre>
<p>
Returns error
error or nil when no errors occured.
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.Close">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=13472:13534#L410">Close</a>
					<a class="permalink" href="index.html#MongoDbPersistence.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) Close(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
Close methos closes component and frees used resources.
Parameters:
</p>
<pre>- correlationId string
(optional) transaction id to trace execution through call chain.
</pre>
<p>
Return error
error or nil when no errors occured.
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.Configure">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=7954:8020#L211">Configure</a>
					<a class="permalink" href="index.html#MongoDbPersistence.Configure">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) Configure(config *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/">cconf</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/config/#ConfigParams">ConfigParams</a>)</pre>
				<p>
Configure method is configures component by passing configuration parameters.
Parameters:
</p>
<pre>- config  *cconf.ConfigParams
configuration parameters to be set.
</pre>

				
				
				
			
				
				<h3 id="MongoDbPersistence.Create">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=19727:19834#L614">Create</a>
					<a class="permalink" href="index.html#MongoDbPersistence.Create">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) Create(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, item interface{}) (result interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Create was creates a data item.
Parameters:
</p>
<pre>- correlation_id string
(optional) transaction id to Trace execution through call chain.
- item interface{}
an item to be created.
</pre>
<p>
Returns result interface{}, err error
created item and error, if they are occured
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.DeleteByFilter">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=20728:20819#L641">DeleteByFilter</a>
					<a class="permalink" href="index.html#MongoDbPersistence.DeleteByFilter">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) DeleteByFilter(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter interface{}) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
DeleteByFilter is deletes data items that match to a given filter.
This method shall be called by a func (c *IdentifiableMongoDbPersistence) deleteByFilter method from child class that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId  string
(optional) transaction id to Trace execution through call chain.
- filter  interface{}
(optional) a filter BSON object.
</pre>
<p>
Return error
error or nil for success.
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.EnsureIndex">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=9497:9587#L264">EnsureIndex</a>
					<a class="permalink" href="index.html#MongoDbPersistence.EnsureIndex">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) EnsureIndex(keys interface{}, options *<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/options/">mongoopt</a>.<a href="http://localhost:6060/pkg/go.mongodb.org/mongo-driver/mongo/options/#IndexOptions">IndexOptions</a>)</pre>
				<p>
EnsureIndex method are adds index definition to create it on opening
Parameters:
</p>
<pre>- keys interface{}
index keys (fields)
- options *mongoopt.IndexOptions
index options
</pre>

				
				
				
			
				
				<h3 id="MongoDbPersistence.GetCountByFilter">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=21541:21653#L660">GetCountByFilter</a>
					<a class="permalink" href="index.html#MongoDbPersistence.GetCountByFilter">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) GetCountByFilter(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter interface{}) (count <a href="http://localhost:6060/pkg/builtin/#int64">int64</a>, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetCountByFilter is gets a count of data items retrieved by a given filter.
This method shall be called by a func (c *IdentifiableMongoDbPersistence) GetCountByFilter method from child type that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId  string
(optional) transaction id to Trace execution through call chain.
- filter interface{}
</pre>
<p>
Returns count int, err error
a data count or error, if they are occured
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.GetListByFilter">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=17366:17520#L532">GetListByFilter</a>
					<a class="permalink" href="index.html#MongoDbPersistence.GetListByFilter">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) GetListByFilter(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter interface{}, sort interface{}, sel interface{}) (items []interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetListByFilter is gets a list of data items retrieved by a given filter and sorted according to sort parameters.
This method shall be called by a func (c *IdentifiableMongoDbPersistence) GetListByFilter method from child type that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId string
(optional) transaction id to Trace execution through call chain.
- filter interface{}
(optional) a filter BSON object
- sort interface{}
(optional) sorting BSON object
- select interface{}
(optional) projection BSON object
</pre>
<p>
Returns items []interface{}, err error
data list and error, if they are ocurred
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.GetOneRandom">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=18683:18796#L576">GetOneRandom</a>
					<a class="permalink" href="index.html#MongoDbPersistence.GetOneRandom">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) GetOneRandom(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter interface{}) (item interface{}, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetOneRandom is gets a random item from items that match to a given filter.
This method shall be called by a func (c *IdentifiableMongoDbPersistence) getOneRandom method from child class that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId string
(optional) transaction id to Trace execution through call chain.
- filter interface{}
(optional) a filter BSON object
</pre>
<p>
Returns: item interface{}, err error
random item and error, if theq are occured
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.GetPageByFilter">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=15262:15446#L467">GetPageByFilter</a>
					<a class="permalink" href="index.html#MongoDbPersistence.GetPageByFilter">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) GetPageByFilter(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>, filter interface{}, paging *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/">cdata</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/#PagingParams">PagingParams</a>,
    sort interface{}, sel interface{}) (page *<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/">cdata</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/data/#DataPage">DataPage</a>, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
GetPageByFilter is gets a page of data items retrieved by a given filter and sorted according to sort parameters.
This method shall be called by a func (c *IdentifiableMongoDbPersistence) GetPageByFilter method from child type that
receives FilterParams and converts them into a filter function.
Parameters:
</p>
<pre>- correlationId  string
 (optional) transaction id to Trace execution through call chain.
- filter interface{}
(optional) a filter JSON object
- paging *cdata.PagingParams
(optional) paging parameters
- sort interface{}
(optional) sorting BSON object
- select  interface{}
(optional) projection BSON object
</pre>
<p>
Returns page cdata.DataPage, err error
a data page or error, if they are occured
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.IsOpen">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=11315:11357#L344">IsOpen</a>
					<a class="permalink" href="index.html#MongoDbPersistence.IsOpen">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) IsOpen() <a href="http://localhost:6060/pkg/builtin/#bool">bool</a></pre>
				<p>
IsOpen method is checks if the component is opened.
Returns true if the component has been opened and false otherwise.
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.NewObjectByPrototype">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=21986:22051#L671">NewObjectByPrototype</a>
					<a class="permalink" href="index.html#MongoDbPersistence.NewObjectByPrototype">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) NewObjectByPrototype() <a href="http://localhost:6060/pkg/reflect/">reflect</a>.<a href="http://localhost:6060/pkg/reflect/#Value">Value</a></pre>
				<p>
service function for return pointer on new prototype object for unmarshaling
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.Open">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=11589:11650#L354">Open</a>
					<a class="permalink" href="index.html#MongoDbPersistence.Open">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) Open(correlationId <a href="http://localhost:6060/pkg/builtin/#string">string</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
Open method is opens the component.
Parameters:
</p>
<pre>- correlationId  string
(optional) transaction id to trace execution through call chain.
</pre>
<p>
Return error
error or nil when no errors occured.
</p>

				
				
				
			
				
				<h3 id="MongoDbPersistence.PerformConvertFromPublic">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=9893:9976#L279">PerformConvertFromPublic</a>
					<a class="permalink" href="index.html#MongoDbPersistence.PerformConvertFromPublic">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) PerformConvertFromPublic(item interface{}) interface{}</pre>
				<p>
ConvertFromPublic method help convert object (map) from public view by replaced &#34;Id&#34; to &#34;_id&#34; field
Parameters:
</p>
<pre>- item *interface{}
converted item
</pre>

				
				
				
			
				
				<h3 id="MongoDbPersistence.PerformConvertToPublic">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=10538:10620#L309">PerformConvertToPublic</a>
					<a class="permalink" href="index.html#MongoDbPersistence.PerformConvertToPublic">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) PerformConvertToPublic(value interface{}) interface{}</pre>
				<p>
ConvertToPublic method is convert object (map) to public view by replaced &#34;_id&#34; to &#34;Id&#34; field
Parameters:
</p>
<pre>- item *interface{}
converted item
</pre>

				
				
				
			
				
				<h3 id="MongoDbPersistence.SetReferences">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=8390:8463#L222">SetReferences</a>
					<a class="permalink" href="index.html#MongoDbPersistence.SetReferences">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) SetReferences(references <a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/">crefer</a>.<a href="http://localhost:6060/pkg/github.com/pip-services3-go/pip-services3-commons-go/refer/#IReferences">IReferences</a>)</pre>
				<p>
SetReferences method are sets references to dependent components.
Parameters:
</p>
<pre>- references crefer.IReferences
references to locate the component dependencies.
</pre>

				
				
				
			
				
				<h3 id="MongoDbPersistence.UnsetReferences">func (*MongoDbPersistence) <a href="http://localhost:6060/src/persistence/MongoDbPersistence.go?s=8970:9016#L242">UnsetReferences</a>
					<a class="permalink" href="index.html#MongoDbPersistence.UnsetReferences">&#xb6;</a>
					
					
				</h3>
				<pre>func (c *<a href="index.html#MongoDbPersistence">MongoDbPersistence</a>) UnsetReferences()</pre>
				<p>
UnsetReferences method is unsets (clears) previously set references to dependent components.
</p>

				
				
				
			
		
	

	







<div id="footer">
Build version go1.13.15.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="http://localhost:6060/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
